# Claude Code Context for OmniAds

**IMPORTANT: Read these files FIRST before any development work:**

## ğŸš¨ MANDATORY Reading (Start Here)

1. **`.specify/memory/constitution.md`** - THE SOURCE OF TRUTH
   - All development rules and principles
   - Tech stack requirements
   - Quality gates and testing requirements
   - Non-negotiable practices

2. **`.specify/AI_AGENT_INSTRUCTIONS.md`** - Your workflow guide
   - Step-by-step instructions for feature implementation
   - Validation checklists
   - Forbidden practices
   - Quick reference for common scenarios

3. **`README.md`** - Project overview
   - Architecture
   - Features implemented
   - Tech stack details
   - Getting started guide

## ğŸ“‹ Workflow Summary

### For ANY Feature Implementation:

```
1. Check: Does specs/XXX-feature/spec.md exist? â†’ If NO, create it
2. Check: Does specs/XXX-feature/plan.md exist? â†’ If NO, create it
3. Check: Does specs/XXX-feature/tasks.md exist? â†’ If NO, create it
4. Implement: Follow tasks.md step-by-step
5. Test: Write unit tests (80%+ coverage MANDATORY)
6. Quality Gates: Run build + tests + docker validation
7. Document: Update README.md
8. Commit: With descriptive message
```

**NO EXCEPTIONS. NO SHORTCUTS.**

## âš ï¸ Before Every Commit

The pre-commit hook (`.husky/pre-commit`) automatically validates:
- âœ… Speckit compliance (spec.md, plan.md, tasks.md exist)
- âœ… All backend tests pass
- âœ… Test coverage meets 80%+ threshold
- âœ… No forbidden practices

**You CANNOT commit if these checks fail.**

## ğŸ¯ Tech Stack (DO NOT DEVIATE)

**Backend:** NestJS + TypeScript + PostgreSQL + TypeORM + Jest
**Frontend:** React + TypeScript + Vite + Tailwind + Vitest
**Infrastructure:** Docker + Docker Compose

See `.specify/memory/constitution.md` for complete list.

## ğŸ“š Reference Example

**Best example to follow:** `specs/006-unmock-ai-integration/`
- Complete spec.md with user stories
- Detailed plan.md with architecture
- Comprehensive tasks.md with 58 tasks

## ğŸš« NEVER Do These

- âŒ Implement without spec.md, plan.md, tasks.md
- âŒ Use `any` type in TypeScript
- âŒ Skip tests or use `git commit --no-verify`
- âŒ Use tech stack not approved in constitution
- âŒ Skip updating README.md
- âŒ Hardcode secrets or API keys
- âŒ Use console.log in production code

## ğŸ¤– AI-Specific Instructions

### When User Says:
- **"Implement feature X"** â†’ Check for spec/plan/tasks first, create if missing
- **"Is this done?"** â†’ Run validation checklist from AI_AGENT_INSTRUCTIONS.md
- **"What's next?"** â†’ Check tasks.md or next feature in priority order
- **"Fix tests"** â†’ Fix tests, NEVER suggest --no-verify
- **"Deploy"** â†’ Verify Docker Compose works first

### Always:
- Read constitution.md at session start
- Create spec/plan/tasks before coding
- Write tests alongside implementation
- Run quality gates before saying "done"
- Update documentation

### Never:
- Skip reading constitution.md
- Implement without documentation
- Suggest bypassing hooks or tests
- Use unapproved tech stack
- Commit without quality gates passing

## ğŸ“Š Quality Standards

**Test Coverage (Enforced):**
- Statements: 80%+
- Branches: 75%+
- Functions: 80%+
- Lines: 80%+

**Build Success:** Backend + Frontend builds must succeed with no errors

**Docker:** `docker compose up` must succeed with all services healthy

## ğŸ”„ Sequential Development

Features must be implemented **one at a time** in priority order:

1. Feature 001 â†’ complete â†’ quality gates â†’ commit
2. Feature 002 â†’ complete â†’ quality gates â†’ commit
3. Feature 003 â†’ ...

**Auto-continue:** If user requests "implement all features", automatically proceed to next after completing current one.

## ğŸ“ File Structure Reference

```
omniads/
â”œâ”€â”€ .specify/
â”‚   â”œâ”€â”€ memory/
â”‚   â”‚   â””â”€â”€ constitution.md         â† Read this FIRST
â”‚   â”œâ”€â”€ AI_AGENT_INSTRUCTIONS.md    â† Your workflow guide
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â””â”€â”€ bash/
â”‚   â”‚       â””â”€â”€ generate-spec-docs.sh
â”‚   â””â”€â”€ templates/
â”‚       â”œâ”€â”€ spec-template.md
â”‚       â”œâ”€â”€ plan-template.md
â”‚       â””â”€â”€ tasks-template.md
â”œâ”€â”€ specs/
â”‚   â”œâ”€â”€ 001-feature/
â”‚   â”‚   â”œâ”€â”€ spec.md    â† REQUIRED
â”‚   â”‚   â”œâ”€â”€ plan.md    â† REQUIRED
â”‚   â”‚   â””â”€â”€ tasks.md   â† REQUIRED
â”‚   â””â”€â”€ 006-unmock-ai-integration/  â† REFERENCE EXAMPLE
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ README.md
```

## ğŸ’¡ Pro Tips

1. **Use TodoWrite tool** to track progress through tasks.md
2. **Reference feature 006** when unsure about structure
3. **Run quality gates frequently** during development
4. **Commit small, logical chunks** rather than big bang commits
5. **Ask user** if something is unclear, but constitution takes precedence

## ğŸš€ Getting Started (New Session)

```bash
# 1. Read these files in order:
cat .specify/memory/constitution.md
cat .specify/AI_AGENT_INSTRUCTIONS.md
cat README.md

# 2. Check current branch and feature
git branch --show-current

# 3. Check if feature has documentation
ls specs/XXX-feature-name/

# 4. If missing, create from templates
cp .specify/templates/spec-template.md specs/XXX-feature-name/spec.md
cp .specify/templates/plan-template.md specs/XXX-feature-name/plan.md
cp .specify/templates/tasks-template.md specs/XXX-feature-name/tasks.md

# 5. Start implementation following tasks.md
```

## âš¡ Quick Commands

```bash
# Generate spec docs for a feature
./.specify/scripts/bash/generate-spec-docs.sh 001

# Run backend tests
cd backend && npm test

# Run frontend tests
cd frontend && npm run test:run

# Build everything
cd backend && npm run build && cd ../frontend && npm run build

# Start with Docker
docker compose up --build -d
docker compose ps  # Check health
```

## ğŸ“ Help & Support

- **Workflow questions?** â†’ See `.specify/AI_AGENT_INSTRUCTIONS.md`
- **Tech stack questions?** â†’ See `.specify/memory/constitution.md`
- **Example needed?** â†’ See `specs/006-unmock-ai-integration/`
- **Docker help?** â†’ See `DOCKER.md`

---

**Last Updated:** 2025-11-06
**Enforcement:** Mandatory via pre-commit hooks
**Non-Compliance:** Commit will be blocked
